<!-- TODO: rename this file and split it into it's components -->
<gr-top-bar fixed="true" role="banner" aria-label="Top bar">
    <gr-top-bar-nav role="region" aria-label="Primary navigation and image search - row 1">
        <div role="region" aria-label="Image search and filters">
            <search-query></search-query>
        </div>
    </gr-top-bar-nav>

    <gr-top-bar-actions role="region" aria-label="User actions and secondary navigation">
        <file-uploader ng-if="ctrl.canUpload" class="top-bar-item side-padded"></file-uploader>
    </gr-top-bar-actions>
</gr-top-bar>

<gr-top-bar fixed="true" role="banner" aria-label="Top bar" style="z-index: 28;">
    <div style="width: 100%; display: flex; justify-content: flex-end;">
    <form class="search">

    <!-- permissions filter -->
    <!--<permissions-filter
       props="ctrl.permissionsProps"
    ></permissions-filter>-->
    <!-- end permissions filter -->

    <div class="search__modifier-container">
        <ul class="search__modifier search__filter" ng-class="filtersShown ? 'search__filter--show' : 'search__filter--hide'">
            <li class="search__modifier-item">
                <gu-date-range class="search__date"
                               gu:start-date="searchQuery.dateFilter.since"
                               gu:end-date="searchQuery.dateFilter.until"
                               gu:preset-dates="searchQuery.sinceOptions"
                               gu:selected-field="searchQuery.dateFilter.field"
                               gu:fields="searchQuery.filterDateFieldsOptions"
                               gu:show-extras="true"
                               gu:first-day="1">
                </gu-date-range>
            </li>
        </ul>
    </div>

    <div class="search__modifier-container" style="margin-left: 10px;position: relative;top: -10px;">
        <a ng-if="ctrl.canUpload"
           ui-sref="upload"
           gr-track-click="Your recent uploads button"
           gr-track-click-data="{'Location': 'Search navigation'}"
           class="top-bar-item clickable side-padded"
           title="my recent uploads"
           aria-label="My recent uploads">
            <gr-icon-label gr-icon="photo_library">My recent uploads</gr-icon-label>
        </a>
    </div>

    <div class="search__modifier-container">
        <button class="search__modifier-toggle"
                type="button"
                ng-click="orderShown = !orderShown">
            <gr-icon class="search__modifier-toggle__icon">sort</gr-icon>
            <span class="search__modifier-toggle__text">Sort order</span>
        </button>

        <ul class="search__modifier order__option"
            ng-class="orderShown ? 'order__option--show' : 'order__option--hide'">
            <li class="search__modifier-item radio-list">
                <div class="radio-list__item">
                    <input type="radio"
                           aria-hidden="false"
                           id="sort-direction__desc"
                           class="radio-list__circle"
                           name="sort-direction"
                           ng-value="undefined"
                           ng-model="searchQuery.ordering.orderBy"
                           aria-label="Order search results by newest first">
                    <label for="sort-direction__desc" class="radio-list__label"
                           ng-class="{'radio-list--selected': searchQuery.ordering.orderBy === undefined}">
                        <div class="radio-list__selection-state"></div>
                        <div class="radio-list__label-value">Newest first</div>
                    </label>
                </div>
                <div ng-if="!searchQuery.collectionSearch"
                     class="radio-list__item">
                    <input type="radio"
                           aria-hidden="false"
                           id="sort-direction__asc"
                           class="radio-list__circle"
                           name="sort-direction"
                           ng-value="'oldest'"
                           ng-model="searchQuery.ordering.orderBy"
                           aria-label="Order search results by oldest first">
                    <label for="sort-direction__asc" class="radio-list__label"
                           ng-class="{'radio-list--selected': searchQuery.ordering.orderBy === 'oldest'}">
                        <div class="radio-list__selection-state"></div>
                        <div class="radio-list__label-value">Oldest first</div>
                    </label>
                </div>
                <div ng-if="searchQuery.collectionSearch" class="radio-list__item">
                    <input type="radio"
                           id="sort-direction__added-to-collection"
                           class="radio-list__circle"
                           name="sort-direction"
                           ng-value="'dateAddedToCollection'"
                           ng-model="searchQuery.ordering.orderBy">
                    <label for="sort-direction__added-to-collection" class="radio-list__label"
                           ng-class="{'radio-list--selected': searchQuery.ordering.orderBy === 'dateAddedToCollection'}">
                        <div class="radio-list__selection-state"></div>
                        <div class="radio-list__label-value">Recently Added First</div>
                    </label>
                </div>
            </li>
        </ul>
    </div>
    </form>
    </div>
</gr-top-bar>

<gr-panels class="search-panels" role="main" aria-label="Image search results">
    <gr-panel gr-left="true" gr-panel="ctrl.collectionsPanel" gr-icon="collections"
              gr-remember-scroll="true" role="region" aria-label="Collections">
        <ui-view name="collectionPanel"></ui-view>
    </gr-panel>

    <gr-panel-content role="region" aria-label="Matched image search results">
        <ui-view name="results"></ui-view>
    </gr-panel-content>

    <gr-panel gr-right="true" gr-panel="ctrl.metadataPanel" gr-icon="collections"
              role="region" aria-label="Image information">
        <ui-view name="infoPanel"></ui-view>
    </gr-panel>
</gr-panels>

<ui-view name="multiDrag"></ui-view>
<dnd-uploader ng-if="ctrl.canUpload"></dnd-uploader>
